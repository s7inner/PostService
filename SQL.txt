DROP TABLE Person CASCADE;
DROP TABLE profile CASCADE;
DROP TABLE shipment CASCADE;

CREATE TABLE Person
(
    id       int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    username VARCHAR(100) NOT NULL,
    password VARCHAR(255),
    role     VARCHAR(50)  NOT NULL
);

INSERT INTO Person (username, password, role)
VALUES ('admin@gmail.com', '$2a$10$xsEoIz3CzP13yf6L631TUOdqh2rn/Q8FoKI3uxWJk2jHN/IZyVhtS', 'ROLE_ADMIN'),
       ('onlyForView@gmail.com', '$2a$10$SYZjfy9jn6r4zKqgr3GrxuZVU9EbsG8X0us1a71BK4Zy14CjT7066', 'ROLE_ONLY_FOR_VIEW');

CREATE TABLE profile
(
    id                int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    full_name         VARCHAR(100) NOT NULL,
    email             VARCHAR(100) NOT NULL,
    phone             VARCHAR(100) NOT NULL,
    address           VARCHAR(100) NOT NULL,
    car_license_plate VARCHAR(100),
    car_model         VARCHAR(100),
    status            VARCHAR(100),
    person_id         INTEGER      NOT NULL,
    FOREIGN KEY (person_id) REFERENCES person (id)
);

CREATE TABLE shipment
(
    id                         int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    invoice                    VARCHAR(255)                   NOT NULL,
    sender_full_name           VARCHAR(255)                   NOT NULL,
    sender_email               VARCHAR(255)                   NOT NULL,
    sender_phone               VARCHAR(255)                   NOT NULL,
    origin                     VARCHAR(255)                   NOT NULL,
    loading_date               VARCHAR(255)                   NOT NULL,
    recipient_full_name        VARCHAR(255)                   NOT NULL,
    recipient_email            VARCHAR(255)                   NOT NULL,
    recipient_phone            VARCHAR(255)                   NOT NULL,
    destination                VARCHAR(255)                   NOT NULL,
    unloading_date             VARCHAR(255)                   NOT NULL,
    shipment_short_description VARCHAR(255)                   NOT NULL,
    shipment_weight            INTEGER                        NOT NULL,
    shipment_length            INTEGER                        NOT NULL,
    shipment_width             INTEGER                        NOT NULL,
    shipment_height            INTEGER                        NOT NULL,
    shipment_weight_volumetric INTEGER                        NOT NULL,
    shipment_packaging         VARCHAR(255)                   NOT NULL,
    shipment_price             INTEGER                        NOT NULL,
    shipment_long_description  VARCHAR(255)                   NOT NULL,
    local_date_time            VARCHAR(255)                   NOT NULL,
    shipment_photo             VARCHAR(255)                   NOT NULL,
    status                     VARCHAR(255)                   NOT NULL,
    distance                   VARCHAR(255)                   NOT NULL,
    duration                   VARCHAR(255)                   NOT NULL,
    person_id                  INTEGER REFERENCES person (id) NOT NULL
);

CREATE TABLE message
(
    id        int PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
    content   TEXT   NOT NULL,
    author_id BIGINT NOT NULL,
    FOREIGN KEY (author_id) REFERENCES person (id)
);

